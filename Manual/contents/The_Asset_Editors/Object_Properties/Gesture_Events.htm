<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>События жестов</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page detailing the gesture events." />
  <meta name="rh-index-keywords" content="Objects - Gesture Events,event_data" />
  <meta name="search-keywords" content="flick,pan,rotate,gesture,gesture events,tap" />
  <link rel="stylesheet" type="text/css" href="../../assets/css/default.css" />
  <script src="../../assets/scripts/main_script.js"></script>
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>События, связанные с жестами</h1>
  <p><img alt="The Gesture Events" class="center" src="../../assets/Images/Asset_Editors/Editor_Objects_Gesture.png" /></p>
  <p>События в категории Gesture Event будут запускаться всякий раз, когда <span data-keyref="GameMaker Name">GameMaker</span> обнаружит &quot;жест&quot; мыши или событие на сенсорном экране (хотя эти события жестов разработаны специально для мобильного использования, они также могут быть использованы на других объектах для обнаружения мыши, хотя в этом случае они не будут обнаруживать множественные касания). Целью системы жестов является попытка распознавания вводимых данных на более высоком уровне, чем прямые функции считывания мыши\ касаний, и она разработана для упрощения реализации часто используемых вводов на сенсорных устройствах.</p>
  <p class="note"><span class="note">ПРИМЕЧАНИЕ</span> Эти события не будут срабатывать на платформе HTML5 из-за отсутствия поддержки мультитач с использованием этих событий на этой платформе. Если вы ищете жесты на этой платформе, то вам следует использовать <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/Device_Input.htm">функции устройства</a>.</p>
  <p>Вы можете выбрать обнаружение <strong>жестов экземпляра </strong>или <strong>глобальных жестов </strong>, при этом события жестов экземпляра будут срабатывать только в том случае, если первоначальное касание/щелчок происходит на экземпляре в комнате. Обратите внимание, что для срабатывания этого события у экземпляра должна быть действительная маска столкновения (подробнее см. разделы " <a href="../Sprites.htm">Редактор <span class="notranslate">Sprite</span> - Маска столкновения</a> " и " <a href="../Objects.htm">Редактор объектов - Маска столкновения</a> "). Глобальные события, однако, будут вызываться при касании/щелчке в любом месте игровой комнаты и для всех экземпляров, имеющих это событие.</p>
  <p>Когда жест распознан, он вызовет одно или несколько доступных событий, причем вызванное событие будет зависеть от типа жеста, который был обнаружен. В каждом случае, однако, для вас будет создана <a href="../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">карта DS Map</a>, которая будет храниться во встроенной переменной <span class="inline">event_data</span>. Доступные ключи будут зависеть от того, каким событием она была создана, и показаны в каждом из подразделов ниже.</p>
  <p class="note"><strong>ПРИМЕЧАНИЕ</strong>: Переменная <span class="inline">event_data</span> действительна только в этих событиях, поскольку карта DS, на которую она указывает, автоматически создается в начале события, а затем снова уничтожается в конце, при этом в остальное время эта переменная сбрасывается в значение -1.</p>
  <p>Стоит отметить, что если у вас есть несколько экземпляров под позицией, которой касаются, и все они имеют событие жеста, то сработают <em>все </em>они, а не только &quot;самый верхний&quot; экземпляр. Также обратите внимание, что при использовании нескольких видов камеры и перетаскивании экземпляра возвращаемые значения будут основаны на том виде, в котором вы находились в момент первоначального касания/щелчка - это справедливо для всех последующих событий в этом жесте для данного экземпляра. Поэтому при касании и перетаскивании экземпляра в одном виде, а затем отпускании касания в другом виде, значения будут возвращены относительно исходного вида, в котором жест был впервые обнаружен.</p>
  <p> </p>
  <p><img>  <img>  <img><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down" href="#">События, связанные с касанием, перетаскиванием и пролистыванием</a></p>
  <div class="droptext" data-targetname="drop-down">
    <p class="dropspot">События &quot;Tap&quot;, &quot;Drag&quot; и &quot;Flick&quot; основаны на одном прикосновении или щелчке мыши по экрану, а карта <span class="inline">event_data</span> DS Map будет содержать следующие клавиши:</p>
    <ul class="dropspotlist">
    </ul>
    <table class=" cke_show_border">
      <tbody>
        <tr>
          <th>Ключ</th>
          <th>Описание</th>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">gesture</span>&quot;</td>
          <td><br /> Это идентификационное значение, <i>уникальное</i> для выполняемого жеста. Это позволяет связать вместе различные части жестов, состоящих из нескольких частей (например, начало перетаскивания, перетаскивание и конец перетаскивания).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">touch</span>&quot;</td>
          <td><br /> Это индекс касания, который используется для жеста. В общем случае он начинается с 0 и увеличивается для каждого удерживаемого пальца, затем сбрасывается до 0, когда все пальцы убираются, но если пользователь касается экрана в другом месте, то значение будет больше 0.
            где-либо еще, когда это событие будет вызвано другим прикосновением, то значение будет больше 0.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">posX</span>&quot;</td>
          <td><br /> Это положение X касания в пространстве комнаты.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">posY</span>&quot;</td>
          <td><br /> Это положение касания в пространстве Y в помещении.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">rawposX</span>&quot;</td>
          <td><br /> Это <i>необработанная</i> позиция X касания в пространстве окна (эквивалентно получению позиции мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_raw_x.htm"><span class="inline"><span class="inline">device_mouse_raw_x()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">rawposY</span>&quot;</td>
          <td><br /> Это <i>необработанная</i> позиция по оси Y в пространстве окна (эквивалентно получению позиции мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_raw_y.htm"><span class="inline"><span class="inline">device_mouse_raw_y()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">guiposX</span>&quot;</td>
          <td><br /> Это положение касания в пространстве gui X (эквивалентно получению положения мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_x_to_gui.htm"><span class="inline"><span class="inline">device_mouse_x_to_gui()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">guiposY</span>&quot;</td>
          <td><br /> Это положение касания в пространстве gui по оси Y (эквивалентно получению положения мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_y_to_gui.htm"><span class="inline"><span class="inline">device_mouse_y_to_gui()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">diffX</span>&quot;</td>
          <td><br /> Это разница в пространстве X между положением текущего касания и положением последнего касания в этом жесте.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">diffY</span>&quot;</td>
          <td><br /> Это разница в пространстве Y между положением текущего касания и положением последнего касания в этом жесте.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">rawdiffX</span>&quot;</td>
          <td><br /> Это необработанная разница X между положением текущего касания и положением последнего касания в этом жесте.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">rawdiffY</span>&quot;</td>
          <td><br /> Это необработанная разница по Y между положением текущего касания и положением последнего касания в этом жесте.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">guidiffX</span>&quot;</td>
          <td><br /> Это разница по оси X в пространстве gui между положением текущего касания и положением последнего касания в этом жесте.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">guidiffY</span>&quot;</td>
          <td><br /> Это разница по оси Y в пространстве gui между положением текущего касания и положением последнего касания в этом жесте.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">viewstartposX</span>&quot;</td>
          <td><br /> Это начальная позиция комнаты X текущего жеста.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">viewstartposY</span>&quot;</td>
          <td><br /> Это начальная позиция комнаты Y текущего жеста.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">rawstartposX</span>&quot;</td>
          <td><br /> Это необработанная начальная позиция X текущего жеста.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">rawstartposY</span>&quot;</td>
          <td><br /> Это необработанная начальная позиция Y текущего жеста.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">guistartposX</span>&quot;</td>
          <td><br /> Это начальная позиция X в gui-space для текущего жеста.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">guistartposY</span>&quot;</td>
          <td><br /> Это начальная позиция Y в пространстве gui текущего жеста.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;<span class="inline">isflick</span>&quot;</td>
          <td><b><br /></b>
             <b>Доступно только в событии Drag End</b>. Этот параметр устанавливается в 1, если конец перетаскивания определяется как щелчок. Это означает, что вам не нужно отдельное <b>событие Flick</b>, если вы все равно обрабатываете перетаскивание.</td>
        </tr>
      </tbody>
    </table>
    <p> </p>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down11" href="#">Нажмите</a></p>
    <div class="droptext" data-targetname="drop-down11">
      <p class="dropspot">Событие Tap срабатывает при касании или нажатии на экземпляр или - если это глобальное событие - когда игра регистрирует касание или нажатие в любом месте комнаты. Касание считается быстрым касанием и отпусканием, а если касание длится слишком
        то оно будет считаться перетаскиванием (и вызовет события жеста Drag вместо события Tap). Это событие генерирует карту <span class="inline">event_data</span> DS, которую можно использовать для получения информации о событии. Например:</p>
      <h4>Создать событие</h4>
      <p class="code">x_goto = x;<br /> y_goto = y;</p>
      <h4>Tap Event</h4>
      <p class="code">x_goto = event_data[? &quot;posX&quot;];<br /> y_goto = event_data[? &quot;posY&quot;];</p>
      <h4>Шаговое мероприятие</h4>
      <p class="code">var _pd = point_distance(x, y, x_goto, y_goto);<br /> move_towards_point(x_goto, y_goto, clamp(_pd, 0, 5);</p>
      <p class="dropspot">Приведенный выше код обнаружит касание экрана, затем получит позицию касания и переместит экземпляр в эту позицию. Обратите внимание, что если вы хотите иметь большее или меньшее время обнаружения касания, вы можете установить его с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_drag_time.htm"><span class="inline">gesture_drag_time()</span></a>.
        Она задает время между первоначальным обнаружением и переходом касания в перетаскивание, поэтому установите большее значение, чтобы сделать обнаружение касания более долгим, или меньшее значение, чтобы сделать его более коротким (значение в секундах и по умолчанию равно 0,16).</p>
      <p class="dropspot"> </p>
    </div>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down6" href="#">Двойной удар</a></p>
    <div class="droptext" data-targetname="drop-down6">
      <p class="dropspot">Событие Double Tap срабатывает, когда к экземпляру дважды быстро прикасаются или нажимают на него (или - если это глобальное событие - когда игра регистрирует два быстрых прикосновения или нажатия в любом месте комнаты). Двойное касание считается двумя
        быстрыми касаниями и отпусканием, но если одно из касаний длится слишком долго, то это будет считаться перетаскиванием (и вызовет события жеста Drag вместо события Double Tap). Это событие генерирует <span class="inline">event_data</span> DS
        карту, которую можно использовать для получения информации о событии. Например:</p>
      <h4>Создать событие</h4>
      <p class="code">x_goto = x;<br /> y_goto = y;</p>
      <h4>Мероприятие "Двойной удар</h4>
      <p class="code">instance_destroy();</p>
      <p class="dropspot">Приведенный выше код просто обнаруживает двойное касание и затем уничтожает экземпляр. Обратите внимание, что вы можете установить время между касаниями для запуска двойного касания с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_double_tap_time.htm"><span class="inline">gesture_double_tap_time()</span></a> (которая
        имеет значение по умолчанию - в секундах - 0,16), а также можно задать расстояние между касаниями с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_double_tap_distance.htm"><span class="inline">gesture_double_tap_distance()</span></a> (если
        второе касание будет обнаружено за пределами этого расстояния, оно будет считаться обычным касанием).</p>
      <p class="dropspot"> </p>
    </div>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down7" href="#">Начало перетаскивания</a></p>
    <div class="droptext" data-targetname="drop-down7">
      <p class="dropspot">Событие Drag Start срабатывает, когда пользователь удерживает прикосновение или щелчок, не отпуская его. Оно сработает один раз, когда пройдет заданное время после первого касания, которое по умолчанию составляет 0,16 секунды (хотя вы можете установить любое другое значение в секундах с помощью функции
        любое другое значение в секундах с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_drag_time.htm"><span class="inline">gesture_drag_time()</span></a>). После срабатывания этого события и до тех пор, пока
        пользователь удерживает прикосновение/клик, то событие Перетаскивание будет вызываться каждый шаг, пока прикосновение/клик не будет отпущено. Это событие генерирует карту <span class="inline">event_data</span> DS, которую можно затем использовать для получения информации
        о событии. Например:</p>
      <h4>Создать событие</h4>
      <p class="code">drag_offsetX = 0;<br /> drag_offsetY = 0;</p>
      <h4>Событие начала перетаскивания</h4>
      <p class="code">drag_offsetX = x - event_data[?&quot;posX&quot;];<br /> drag_offsetY = y - event_data[?&quot;posY&quot;];</p>
      <p class="dropspot">Приведенный выше код использует событие Drag Start, чтобы получить позицию касания/щелчка и использовать ее для установки значения смещения по осям x и y. Затем это значение можно использовать при перетаскивании экземпляра, чтобы убедиться, что он не &quot;перепрыгнет&quot; в позицию
        в котором было обнаружено касание/щелчок (продолжение этого примера см. в событии "Перетаскивание" ниже).</p>
      <p class="dropspot"> </p>
    </div>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down8" href="#">Перетаскивание</a></p>
    <div class="droptext" data-targetname="drop-down8">
      <p class="dropspot">Событие перетаскивания запускается после события Drag Start и срабатывает для каждого шага, когда пользователь удерживает прикосновение/щелчок на экземпляре (или экране, если это глобальное событие) и перемещается больше, чем определенный порог перетаскивания.
        По умолчанию это расстояние составляет 0,1 дюйма, но может быть установлено с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_drag_distance.htm"><span class="inline">gesture_drag_distance()</span></a>. Если не происходит
        движение или движение меньше определенного порога, событие не будет вызвано. Это событие генерирует карту <span class="inline">event_data</span> DS, которую можно использовать для получения информации о событии. Например:</p>
      <h4>Создать событие</h4>
      <p class="code">drag_offsetX = 0;<br /> drag_offsetY = 0;</p>
      <h4>Событие начала перетаскивания</h4>
      <p class="code">drag_offsetX = x - event_data[?&quot;posX&quot;];<br /> drag_offsetY = y - event_data[?&quot;posY&quot;];</p>
      <h4>Событие перетаскивания</h4>
      <p class="code">x = event_data[?&quot;posX&quot;] + drag_offsetX;<br /> y = event_data[?&quot;posY&quot;] + drag_offsetY;</p>
      <p class="dropspot">Приведенный выше код примера использует переменные смещения, установленные в событии Drag Start, для перемещения экземпляра при срабатывании события перетаскивания.</p>
      <p class="dropspot"> </p>
    </div>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down9" href="#">Конец волочения</a></p>
    <div class="droptext" data-targetname="drop-down9">
      <p class="dropspot">Событие Drag End срабатывает, когда пользователь отпускает прикосновение/щелчок на экземпляре (или экране, если событие глобальное). Это событие генерирует карту <span class="inline">event_data</span> DS, которую вы можете использовать для получения информации о событии.
        но в этом событии карта будет иметь дополнительный ключ: &quot;<span class="inline">isflick</span>&quot;. Flick рассчитывается как расстояние в секунду, на которое произошло перетаскивание, и значение для ключа &quot;<span class="inline">isflick</span>&quot;
        будет истинным, если оно больше определенного значения расстояния в секунду, и ложным в противном случае. Обратите внимание, что по умолчанию это 2 дюйма в секунду, но вы можете установить другое значение с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_flick_speed.htm"><span class="inline">gesture_flick_speed()</span></a>.
        Также обратите внимание, что существует специальное событие Flick, которое также будет запущено, если переменная &quot;isflick&quot; будет истинной. Примером использования может быть:</p>
      <h4>Создать событие</h4>
      <p class="code">flickVelX = 0.0;<br /> flickVelY = 0.0;</p>
      <h4>Событие окончания перетаскивания</h4>
      <p class="code">isFlick = event_data[?&quot;isflick&quot;];<br /> if (isFlick)<br />     {<br />     flickVelX = event_data[?&quot;diffX&quot;];<br />     flickVelY = event_data[?&quot;diffY&quot;];<br />     }<br /> else
        <br />     {<br />     flickVelX = 0;<br />     flickVelY = 0;<br />     }
      </p>
      <h4>Шаговое мероприятие</h4>
      <p class="code">x += flickVelX;<br /> y += flickVelY;<br /> flickVelX *= 0.7;<br /> flickVelY *= 0.7;</p>
      <p class="dropspot">Приведенный выше код просто получает разницу в положении x и y последнего события перетаскивания и текущего события Drag End, и если перемещение было больше порога щелчка, он устанавливает некоторые переменные, которые используются для перемещения экземпляра
        в событии шага.</p>
      <p class="dropspot"> </p>
    </div>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down10" href="#">Flick</a></p>
    <div class="droptext" data-targetname="drop-down10">
      <p class="dropspot">Событие Flick срабатывает только в том случае, если прикосновение/клик удерживается, перетаскивается, а затем отпускается, и расстояние между последним положением перетаскивания и положением отпускания превышает 2 дюйма в секунду (это настройка по умолчанию, хотя ее можно изменить с помощью функции
        можно изменить с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_flick_speed.htm"><span class="inline">gesture_flick_speed()</span></a>). Это событие создаст карту <span class="inline">event_data</span> DS, которую можно использовать для получения информации о событии. Например:</p>
      <h4>Создать событие</h4>
      <p class="code">flickVelX = 0.0;<br /> flickVelY = 0.0;</p>
      <h4>Флик-событие</h4>
      <p class="code">flickVelX = event_data[?&quot;diffX&quot;];<br /> flickVelY = event_data[?&quot;diffY&quot;];</p>
      <h4>Шаговое мероприятие</h4>
      <p class="code">x += flickVelX;<br /> y += flickVelY;<br /> flickVelX *= 0.7;<br /> flickVelY *= 0.7;</p>
      <p class="dropspot">Приведенный выше код просто получает разницу в положении x и y последнего события перетаскивания и текущего события Flick, и если перемещение было больше порога flick, он устанавливает некоторые переменные, которые используются для перемещения экземпляра в событии шага
        событии шага.</p>
    </div>
    <p> </p>
  </div>
  <p><img><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down2" href="#">События</a> </p>
  <div class="droptext" data-targetname="drop-down2">
    <p class="dropspot">События &quot;Pinch&quot; основаны на одновременном распознавании двух прикосновений к экрану устройства, когда одно из них (или оба) переместилось более чем на определенное расстояние. Угол перемещения прикосновений вместе с перемещением каждого прикосновения является тем, что
      определяют обнаружение события Pinch или Rotate, где (в случае события типа Pinch):</p>
    <ul class="dropspotlist">
      <li class="dropspot">Если одно из касаний не движется, то другое должно двигаться к нему или от него в пределах порогового угла (который можно задать с помощью функций <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_pinch_angle_towards.htm"><span class="inline">gesture_pinch_angle_towards()</span></a> и
        - <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_pinch_angle_away.htm"><span class="inline">gesture_pinch_angle_away()</span></a>).</li>
      <li class="dropspot">Если оба касания движутся, их скорости должны быть примерно в противоположных направлениях, а также выполняется проверка углового порога, чтобы убедиться, что касания движутся примерно в одном направлении.</li>
    </ul>
    <p class="dropspot">При обнаружении двух касаний и движения, соответствующих вышеуказанным критериям, будет инициировано событие Pinch Event, и в каждом из этих событий карта <span class="inline">event_data</span> DS Map будет заполнена следующими клавишами:</p>
    <ul class="dropspotlist">
    </ul>
    <table class=" cke_show_border">
      <tbody>
        <tr>
          <th>Ключ</th>
          <th>Описание</th>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;gesture&quot;</span></td>
          <td><br /> Это идентификационное значение, <i>уникальное</i> для выполняемого жеста. Это позволяет связать вместе различные части жестов, состоящих из нескольких частей (например, начало перетаскивания, перетаскивание и конец перетаскивания).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;touch1&quot;</span></td>
          <td><br /> Это индекс первого прикосновения, которое используется как часть жеста щипка. Обычно он равен 0, но если пользователь прикасается к экрану в другом месте, когда это событие вызвано другим прикосновением, то значение будет
            больше 0.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;touch2&quot;</span></td>
          <td><br /> Это индекс второго касания, которое используется как часть жеста щипка. Обычно он на 1 больше, чем значение для touch1, но может быть и другим, в зависимости от количества определяемых касаний в других местах.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;posX1&quot;</span></td>
          <td><br /> Это положение X в пространстве комнаты для первого касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;posY1&quot;</span></td>
          <td><br /> Это положение по оси Y в пространстве помещения для первого касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawposX1&quot;</span></td>
          <td><br /> Это <i>необработанная</i> позиция X в пространстве окна при первом касании (эквивалентно получению позиции мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_raw_x.htm"><span class="inline"><span class="inline">device_mouse_raw_x()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawposY1&quot;</span></td>
          <td><br /> Это <i>необработанная</i> позиция Y в пространстве окна при первом касании (эквивалентно получению позиции мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_raw_y.htm"><span class="inline"><span class="inline">device_mouse_raw_y()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guiposX1&quot;</span></td>
          <td><br /> Это позиция X в пространстве gui первого касания (эквивалентно получению позиции мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_x_to_gui.htm"><span class="inline"><span class="inline">device_mouse_x_to_gui()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guiposY1&quot;</span></td>
          <td><br /> Это позиция Y в пространстве gui второго касания (эквивалентно получению позиции мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_y_to_gui.htm"><span class="inline"><span class="inline">device_mouse_y_to_gui()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;posX2&quot;</span></td>
          <td><br /> Это положение X в пространстве комнаты для второго касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;posY2&quot;</span></td>
          <td><br /> Это положение по оси Y в пространстве помещения для второго касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawposX2&quot;</span></td>
          <td><br /> Это <i>необработанная</i> позиция X в пространстве окна для первого касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawposY2&quot;</span></td>
          <td><br /> Это <i>необработанная</i> позиция Y в пространстве окна для второго касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guiposX2&quot;</span></td>
          <td><br /> Это позиция X gui-space второго касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guiposY2&quot;</span></td>
          <td><br /> Это положение по оси Y в пространстве gui второго касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;midpointX&quot;</span></td>
          <td><br /> Положение X средней точки между двумя касаниями в пространстве комнаты.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;midpointY&quot;</span></td>
          <td><br /> Положение Y средней точки между двумя касаниями в пространстве комнаты.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawmidpointX&quot;</span></td>
          <td><br /> Это необработанное положение X средней точки в пространстве окна.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawmidpointY&quot;</span></td>
          <td><br /> Это необработанное положение Y средней точки в пространстве окна.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guimidpointX&quot;</span></td>
          <td><br /> Это положение X средней точки в gui-space.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guimidpointY&quot;</span></td>
          <td><br /> Это положение Y средней точки в пространстве gui.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;relativescale&quot;</span></td>
          <td><br /> Это разница в масштабе по сравнению с последним событием в этом жесте (поэтому для событий <b>Pinch In</b> это значение всегда будет меньше 1.0, а для событий <b>Pinch Out</b> - больше 1.0).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;absolutescale&quot;</span></td>
          <td><br /> Это масштаб по сравнению с тем, где находились пальцы в момент начала жеста (так, если расстояние между пальцами уменьшилось вдвое, то этот показатель будет равен 0,5, а если расстояние удвоилось, то 2,0).</td>
        </tr>
      </tbody>
    </table>
    <p class="dropspot"> </p>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down12" href="#">Запуск</a></p>
    <div class="droptext" data-targetname="drop-down12">
      <p class="dropspot">Событие Pinch Start срабатывает, когда к экземпляру (или экрану, если событие глобальное) прикоснулись два &quot;пальца&quot; (и прикосновение сохраняется), а затем один или оба &quot;пальца&quot; перемещаются. Если прикосновения перемещаются
        друг от друга или друг к другу больше, чем минимальное контрольное расстояние (которое по умолчанию равно 0,1 дюйма, но его можно установить с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_pinch_distance.htm"><span class="inline">gesture_pinch_distance()</span></a>),
        и угол между ними находится в пределах заданного значения (по умолчанию 45°, но может быть установлен с помощью функций <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_pinch_angle_towards.htm"><span class="inline">gesture_pinch_angle_towards()</span></a> и
        <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_pinch_angle_away.htm"><span class="inline">gesture_pinch_angle_away()</span></a>), то будет инициировано событие Pinch Start. В этом событии можно задать переменные или сохранить дату положения для дальнейшего использования. Например:
      </p>
      <h4>Мероприятие по запуску</h4>
      <p class="code">pinching = true;<br /> pinch_x = event_data[? &quot;midpointX&quot;]; pinch_y = event_data[? &quot;midpointY&quot;];</p>
      <p class="dropspot">Приведенный выше код обнаружит защемление и сохранит положение средней точки для этого защемления.</p>
      <p class="dropspot"> </p>
    </div>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down13" href="#">Ввод / вывод</a></p>
    <div class="droptext" data-targetname="drop-down13">
      <p class="dropspot">События Pinch In и Pinch Out будут срабатывать при каждом шаге, когда расстояние между двумя касаниями, составляющими щипок, изменяется сверх минимального порога (по умолчанию установлено +/- 0,1 дюйма, но вы можете изменить его с помощью функции gesture_pinch_distance).
        Если прикосновения не перемещаются, то эти события не срабатывают. Эти события генерируют карту <span class="inline">event_data</span> DS, которую можно использовать для получения информации о событии. Например:</p>
      <h4>Глобальное событие вхождения/выхождения пинча</h4>
      <p class="code">var _scale = event_data[? &quot;relativescale&quot;];<br /> var _w = camera_get_view_width(view_camera[0]);<br /> var _h = camera_get_view_height(view_camera[0]);<br /> var _x = camera_get_view_x(view_camera[0]) + (_w / 2);<br /> var _y = camera_get_view_y(view_camera[0])
        + (_h / 2);<br />
        <br /> _w *= _scale;<br /> _h = _w * (room_height / room_width);<br /> _x -= _w / 2;<br /> _y -= _h / 2;<br />
        <br /> camera_set_view_pos(view_camera[0], _x, _y);<br /> camera_set_view_size(view_camera[0], _w, _h);
      </p>
      <p class="dropspot">Приведенный выше код будет масштабировать представление на основе относительного масштаба прикосновений.</p>
      <p class="dropspot"> </p>
    </div>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down14" href="#">Зажимной конец</a><strong></strong></p>
    <div class="droptext" data-targetname="drop-down14">
      <p class="dropspot">Событие Pinch End срабатывает, когда пользователь отпускает одно (или оба) касания устройства. Это событие генерирует карту <span class="inline">event_data</span> DS, которую вы можете использовать для получения информации о событии. Для
        например:</p>
      <h4>Событие, связанное с защемлением конца</h4>
      <p class="code">var _pinchx = event_data[? &quot;midpointX&quot;];<br /> var _pinchy = event_data[? &quot;midpointY&quot;];<br /> var _w = camera_get_view_width(view_camera[0]);<br /> var _h = camera_get_view_height(view_camera[0]);<br /> var _x = _pinchx - (_w / 2);<br /> var _y = _pinchy - (_h / 2);<br />
        <br /> camera_set_view_pos(view_camera[0], _x, _y);
      </p>
      <p class="dropspot">Приведенный выше код установит позицию просмотра по центру средней точки двух касаний, составляющих пинч, когда касания будут отпущены.</p>
      <p><strong></strong></p>
    </div>
    <p class="dropspot"> </p>
  </div>
  <p><img><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down15" href="#">Поворот событий</a></p>
  <div class="droptext" data-targetname="drop-down15">
    <p class="dropspot">События &quot;Поворот&quot; основаны на одновременном распознавании двух прикосновений к экрану устройства, и если в течение определенного времени между ними произошел последовательный угловой поворот. Угол движения прикосновений наряду с
      определяет обнаружение события "Pinch" или "Rotate", где (в случае события типа "Rotate"):</p>
    <ul class="dropspotlist">
      <li class="dropspot">Два касания должны удерживаться в течение определенного минимального времени (по умолчанию время составляет 0,16 секунды, но его можно изменить с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_rotate_time.htm"><span class="inline">gesture_rotate_time()</span></a>).</li>
      <li class="dropspot">В течение этого минимального периода времени они должны вращаться в одном направлении (если направление вращения меняется в течение этого времени, то вращение не начинается).</li>
      <li class="dropspot">Величина поворота должна превышать минимальный пороговый угол (который по умолчанию установлен на 5°, но его можно изменить с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_rotate_angle.htm"><span class="inline">gesture_rotate_angle()</span></a>).</li>
    </ul>
    <p class="dropspot">При обнаружении двух прикосновений и движения, соответствующих вышеуказанным критериям, будет инициировано событие Rotate Event, и в каждом из этих событий карта <span class="inline">event_data</span> DS Map будет заполнена следующими клавишами:</p>
    <ul class="dropspotlist">
    </ul>
    <table class=" cke_show_border">
      <tbody>
        <tr>
          <th>Ключ</th>
          <th>Описание</th>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;gesture&quot;</span></td>
          <td><br /> Это идентификационное значение, <i>уникальное</i> для выполняемого жеста. Это позволяет связать вместе различные части жестов, состоящих из нескольких частей (например, начало перетаскивания, перетаскивание и конец перетаскивания).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;touch1&quot;</span></td>
          <td><br /> Это индекс первого прикосновения, которое используется как часть жеста щипка. Обычно он равен 0, но если пользователь прикасается к экрану в другом месте, когда это событие вызвано другим прикосновением, то значение будет
            больше 0.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;touch2&quot;</span></td>
          <td><br /> Это индекс второго касания, которое используется как часть жеста щипка. Обычно он на 1 больше, чем значение для touch1, но может быть и другим, в зависимости от количества определяемых касаний в других местах.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;posX1&quot;</span></td>
          <td><br /> Это положение X в пространстве комнаты для первого касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;posY1&quot;</span></td>
          <td><br /> Это положение по оси Y в пространстве помещения для первого касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawposX1&quot;</span></td>
          <td><br /> Это <i>необработанная</i> позиция X в пространстве окна при первом касании (эквивалентно получению позиции мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_raw_x.htm"><span class="inline"><span class="inline">device_mouse_raw_x()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawposY1&quot;</span></td>
          <td><br /> Это <i>необработанная</i> позиция Y в пространстве окна при первом касании (эквивалентно получению позиции мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_raw_y.htm"><span class="inline"><span class="inline">device_mouse_raw_y()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guiposX1&quot;</span></td>
          <td><br /> Это позиция X в пространстве gui первого касания (эквивалентно получению позиции мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_x_to_gui.htm"><span class="inline"><span class="inline">device_mouse_x_to_gui()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guiposY1&quot;</span></td>
          <td><br /> Это позиция Y в пространстве gui второго касания (эквивалентно получению позиции мыши с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Device_Input/device_mouse_y_to_gui.htm"><span class="inline"><span class="inline">device_mouse_y_to_gui()</span></a>).</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;posX2&quot;</span></td>
          <td><br /> Это положение X в пространстве комнаты для второго касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;posY2&quot;</span></td>
          <td><br /> Это положение по оси Y в пространстве помещения для второго касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawposX2&quot;</span></td>
          <td><br /> Это <i>необработанная</i> позиция X в пространстве окна для первого касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawposY2&quot;</span></td>
          <td><br /> Это <i>необработанная</i> позиция Y в пространстве окна для второго касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guiposX2&quot;</span></td>
          <td><br /> Это позиция X gui-space второго касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guiposY2&quot;</span></td>
          <td><br /> Это позиция Y в пространстве gui для второго касания.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;pivotX&quot;</span></td>
          <td><br /> Положение X точки поворота в пространстве помещения.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;pivotY&quot;</span></td>
          <td><br /> Положение Y точки вращения в пространстве помещения.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawpivotX&quot;</span></td>
          <td><br /> Это необработанное положение X в пространстве окна точки поворота.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;rawpivotY&quot;</span></td>
          <td><br /> Это необработанное положение Y точки вращения в пространстве окна.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guipivotX&quot;</span></td>
          <td><br /> Это положение X точки поворота в пространстве gui.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;guipivotY&quot;</span></td>
          <td><br /> Это положение Y точки поворота в пространстве gui.</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;relativeangle&quot;</span></td>
          <td><br /> Это разница в повороте по сравнению с последним событием в этом жесте, измеряется в градусах</td>
        </tr>
        <tr>
          <td><span class="notranslate">&quot;absoluteangle&quot;</span></td>
          <td><br /> Это разница в угле по сравнению с тем, где находились пальцы в момент начала жеста, измеряемая в градусах. Так, например, если с момента начала жеста пальцы повернулись на четверть окружности, то это значение будет равно 90°
            или -90°, в зависимости от направления вращения.</td>
        </tr>
      </tbody>
    </table>
    <p> </p>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down16" href="#">Поворот Начало</a></p>
    <div class="droptext" data-targetname="drop-down16">
      <p class="dropspot">Событие Rotate Start срабатывает, когда к экземпляру (или экрану, если событие глобальное) прикоснулись два &quot;пальца&quot; (и прикосновение сохраняется), а затем один или оба &quot;пальца&quot; поворачиваются от своего начального положения
        положения. Вращение касаний должно начаться в течение короткого промежутка времени (по умолчанию 0,16 секунды, но его можно задать с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_rotate_time.htm"><span class="inline">gesture_rotate_time()</span></a>)
        и быть больше минимального углового порога (по умолчанию 5°, но его можно изменить с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_rotate_angle.htm"><span class="inline">gesture_rotate_angle()</span></a>).
        Если эти проверки верны, то будет запущено событие Rotate Start, которое можно использовать для хранения значений или установки переменных для использования с остальными событиями rotate. Например:</p>
      <h4>Создать событие</h4>
      <p class="code">rotating = false;<br /> view_a = camera_get_view_angle(view_camera[0]);</p>
      <h4>Событие начала поворота</h4>
      <p class="code">rotating = true;</p>
      <p class="dropspot">Приведенный выше код просто устанавливает некоторые переменные для поворота камеры обзора, а затем в событии Rotate Start устанавливает одну из них в true.</p>
      <p class="dropspot"> </p>
    </div>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down17" href="#">Вращающийся</a></p>
    <div class="droptext" data-targetname="drop-down17">
      <p class="dropspot">Событие Rotating будет запускаться каждый раз, когда касания на экране вращаются друг вокруг друга, до тех пор, пока движение превышает минимальный угловой порог (по умолчанию 5°, но его можно изменить с помощью функции <a href="../../GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_rotate_angle.htm"><span class="inline">gesture_rotate_angle()</span></a>).
        Это событие можно использовать для установки переменных и манипулирования экземплярами, например:</p>
      <h4>Вращающееся событие</h4>
      <p class="code">var _relangle = event_data[?&quot;relativeangle&quot;];<br /> var _a = camera_get_view_angle(view_camera[0]);<br /> _a += _relangle;<br /> camera_set_view_angle(view_camera[0], _a);</p>
      <p class="dropspot">Приведенный выше код поворачивает вид камеры в зависимости от вращательного движения касаний в событии.</p>
      <p class="dropspot"> <strong></strong></p>
    </div>
    <p class="dropspot"><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down18" href="#">Поворотный конец</a><strong></strong></p>
    <div class="droptext" data-targetname="drop-down18">
      <p class="dropspot">Событие Rotate End сработает, когда одно (или оба) касания, составляющие жест, будут отпущены с экрана устройства. Это событие можно использовать, например, для установки переменных и манипулирования экземплярами:</p>
      <h4>Событие окончания поворота</h4>
      <p class="code">rotating = false;</p>
      <h4>Шаговое мероприятие</h4>
      <p class="code">if !rotating<br />     {<br />     var _a = camera_get_view_angle(view_camera[0]);<br />     var _adif = angle_difference(view_a, _a);<br />     _a += median(-5, _adif, 5);<br />     camera_set_view_angle(view_camera[0], _a);<br />     }</p>
      <p class="dropspot">Приведенный выше код использует событие Rotate End для определения того, когда пользователь останавливает жест, а затем устанавливает переменную. Эта переменная затем используется в событии step для поворота камеры обзора в исходное положение.</p>
      <p class="dropspot"> </p>
    </div>
    <p class="dropspot"> </p>
  </div>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Назад: <a href="Object_Events.htm">События объекта</a></div>
        <div style="float:right">Следующее: <a href="Event_Order.htm">Порядок проведения мероприятий</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Все права защищены</span></h5>
  </div>
  <!-- KEYWORDS
Gesture Events
Flick Events
Pan Events
Rotate Events
Tap Events
Gestures
-->
  <!-- TAGS
gesture_events
-->
</body>
</html>