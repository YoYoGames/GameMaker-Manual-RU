<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>HTTP</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page detailing the HTTP async event." />
  <meta name="rh-index-keywords" content="Objects - Async HTTP Event" />
  <meta name="search-keywords" content="HTTP,ev_web_async" />
  <link rel="stylesheet" type="text/css" href="../../../assets/css/default.css" />
  <script src="../../../assets/scripts/main_script.js"></script>
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>HTTP</h1>
  <p><img>Событие HTTP - это событие, которое вызывается <a class="glossterm" data-glossterm="обратный звонок" href="#">обратным вызовом</a> одной из <a href="../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/HTTP/HTTP.htm">функций<span class="inline">http_*()</span> </a>, например <a href="../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/HTTP/http_post_string.htm"><span class="inline">http_post_string()</span></a>. Оно фактически генерирует <a href="../../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">DS Map</a>, которая является эксклюзивной для этого события и хранится в специальной переменной <span class="inline"><a href="../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> </span>(пожалуйста, смотрите отдельные функции для примеров кода, которые объясняют использование этого события более подробно). Эта DS-карта имеет следующую общую структуру:</p>
  <ul class="dropspotlist">
    <li class="dropspot">&quot;<span class="inline">id</span>&quot;: Идентификатор, который был возвращен командой. Если вы отправляете серию запросов <span class="inline">http_</span>, вам нужно знать, на какой из них вы получаете ответ, поэтому вы будете использовать это значение для сравнения со значением, которое вы сохранили при первоначальной отправке запроса, чтобы найти нужный запрос.</li>
    <li class="dropspot">&quot;<span class="inline">status</span>&quot;: Возвращает значение меньше 0 в случае ошибки, 0 в случае успеха и 1, если содержимое загружается.</li>
    <li class="dropspot">&quot;<span class="inline">result</span>&quot;: Полученные данные (только строка), или путь к загруженному файлу, если вы использовали <a href="../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/HTTP/http_get_file.htm"><span class="inline">http_get_file()</span></a>. Вы можете получить этот ключ, только если статус равен 0, но это зависит от платформы.</li>
    <li class="dropspot">&quot;<span class="inline">url</span>&quot;: Полный URL-адрес, который вы запросили.</li>
    <li class="dropspot">&quot;<span class="inline">http_status</span>&quot;: Необработанный код статуса http (если доступен). Возвращается стандартный код статуса для большинства браузеров, например: 304 для &quot;Not Modified&quot; или 204 для &quot;No Content&quot; и т.д..</li>
  </ul>
  <p>Выше показано, что вы получите при использовании функции <a href="../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/HTTP/http_post_string.htm"><span class="inline">http_post_string()</span></a> но каждая из функций <span class="inline">http_</span> может возвращать немного другую карту, поэтому, пожалуйста, обратитесь к руководству по каждой функции, чтобы узнать точные данные, которые возвращаются для нее.</p>
  <p class="note"><strong>ПРИМЕЧАНИЕ</strong>: Поскольку <span style="font-size:14px;"><span class="inline" style="font-size: 14px">async_load </span></span>создает карту DS, эти функции особенно полезны в сочетании с функциями <a href="../../../GameMaker_Language/GML_Reference/File_Handling/Encoding_And_Hashing/json_encode.htm"><span class="inline" style="font-size: 14px">json_encode()</span></a> и <a href="../../../GameMaker_Language/GML_Reference/File_Handling/Encoding_And_Hashing/json_decode.htm"><span class="inline" style="font-size: 14px">json_decode()</span></a> функциями.</p>
  <p>Также могут быть дополнительные данные, предоставляемые этой картой, если вы запросили файлы для загрузки. В этом случае &quot;статус&quot; будет иметь значение 1, а карта DS будет содержать эти дополнительные ключи:</p>
  <ul class="dropspotlist">
    <li class="dropspot">&quot;<span class="inline">contentLength</span>&quot;: Это размер файла, который, по словам веб-сервера, вы должны ожидать получить (может быть -1, если сервер не возвращает эти данные).</li>
    <li class="dropspot">&quot;<span class="inline">sizeDownloaded</span>&quot;: Размер данных, которые уже были загружены.</li>
  </ul>
  <p>Обратите внимание, что событие не будет запускаться для каждого полученного пакета данных, а будет обновляться в любое время во время загрузки в основном цикле игры. Также обратите внимание, что в настоящее время эта функциональность доступна только для обычных целевых платформ <span class="notranslate">Windows</span>.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Назад: <a href="../Async_Events.htm">Асинхронные события</a></div>
        <div style="float:right">Следующий: <a href="IAP.htm">Покупка в приложении</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Все права защищены</span></h5>
  </div>
  <!-- KEYWORDS
Asynchronous HTTP Event
ev_web_async
-->
  <!-- TAGS
ev_web_async
-->
</body>
</html>