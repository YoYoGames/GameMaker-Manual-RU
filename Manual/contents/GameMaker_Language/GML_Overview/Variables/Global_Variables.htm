<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Глобальные переменные</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css" />
  <script src="../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page explaining global variables" />
  <meta name="rh-index-keywords" content="global,globalvar,Global Variables" />
  <meta name="search-keywords" content="global,global variables,globalvar" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Глобальные переменные</h1>
  <p>Основное описание <strong>глобальной </strong>переменной - это переменная, которая, будучи объявленной, не принадлежит ни одному конкретному экземпляру, но к ней могут обращаться все. Как и <a href="Local_Variables.htm">локальные переменные</a>, глобальные переменные должны быть объявлены с использованием идентификатора, но в отличие от локальной переменной, глобальная переменная остается в памяти <em>до конца игры</em>. Таким образом, вы можете создать глобальную переменную для отслеживания (например) количества патронов, которые есть у игрока, а затем просто обновлять эту переменную в разные моменты игры, формировать любой экземпляр или функцию и в любое время. По сути, глобальная переменная не принадлежит какому-либо конкретному экземпляру и может быть доступна, изменена и использована всеми экземплярами, а любые изменения, внесенные в переменную, являются &quot;глобальными&quot;, так как все экземпляры, использующие переменную, будут затронуты этим изменением. Давайте рассмотрим пример:</p>
  <p class="code">global.food = 5;</p>
  <p>Мы объявляем переменную &quot;<span class="inline">food</span>&quot;, написав сначала &quot;<span class="inline">global</span>&quot;, а затем &quot;<span class="inline">.</span>&quot;, чтобы сообщить <span data-keyref="GameMaker Name">GameMaker</span>, что эта переменная теперь имеет глобальную область применения. С этого момента мы должны будем использовать эту форму каждый раз, когда нам потребуется получить доступ к этой переменной или изменить ее каким-либо образом. Итак, мы создали новую переменную под названием &quot;<span class="inline">food</span>&quot; и объявили ее глобальной. Теперь любой экземпляр или функция может использовать и изменять эту переменную любым способом, и все остальные экземпляры будут &quot;видеть&quot; это. Например, у нас может быть другой объект еды, с которым сталкивается игрок, и в событии столкновения мы имеем:</p>
  <p class="code">global.food +=1;</p>
  <p>У нас также есть другой объект, который рисует это значение следующим образом:</p>
  <p class="code">draw_text(32, 32, &quot;food = &quot; + string(global.food));</p>
  <p>С помощью глобальных переменных мы можем изменять значения и видеть, как эти изменения отражаются во всех экземплярах объектов, которые ссылаются на эту переменную. Как и в случае с <i>локальными</i> переменными, вы должны следить за тем, чтобы ваши глобальные переменные не назывались так же, как и все переменные экземпляра, поскольку это может вызвать проблемы и привести к появлению ошибок в ваших играх из-за дублирования переменных, что иногда бывает трудно отладить. Как правило, в самом начале игры у вас должен быть один объект, объявляющий все ваши глобальные переменные (например, в <a href="../../../The_Asset_Editors/Object_Properties/Other_Events.htm">событии Room Start Event</a> первого объекта, помещенного в первую комнату игры), или одна <a href="../Script_Functions.htm">функция скрипта</a>, объявляющая их все вместе, так как это дает вам удобное место для возврата и ссылки на все сразу, если вам нужно проверить имя переменной или изменить значение.</p>
  <p>В<span data-keyref="GameMaker Name">GameMaker</span> есть коллекция &quot;встроенных&quot; глобальных переменных, и вам следует знать о них, поскольку вы можете назвать одну из своих переменных экземпляра таким же именем или захотеть иметь свою собственную глобальную переменную с таким же именем и удивляться, почему у вас возникают ошибки! Однако их легко обнаружить, поскольку в редакторе кода они отображаются другим цветом, а также появляются в строке автозаполнения внизу. Большинство встроенных глобальных переменных имеют очень специфическое применение и перечислены в соответствующих разделах руководства, однако есть две важные переменные, которые используются часто и не перечислены в других разделах:</p>
  <ul class="colour">
    <li><span class="inline"><a data-xref="{title}" href="Builtin_Global_Variables/async_load.htm">async_load</a></span></li>
    <li><span class="inline"><a data-xref="{title}" href="../../GML_Reference/Game_Input/Gesture_Input/event_data.htm">event_data</a></span></li>
  </ul>
  <p>Есть также три <b>устаревшие</b> встроенные глобальные переменные, о которых вы должны знать (эти переменные предназначены только для поддержки старых проектов из предыдущих версий <span class="notranslate">GameMaker</span> и должны использоваться в следующих случаях <b><i>не использовать в новых проектах</i></b>):</p>
  <ul class="colour">
    <li><span class="inline"><a data-xref="{title}" href="Builtin_Global_Variables/score.htm">score</a></span></li>
    <li><span class="inline"><a data-xref="{title}" href="Builtin_Global_Variables/health.htm">health</a></span></li>
    <li><span class="inline"><a data-xref="{title}" href="Builtin_Global_Variables/lives.htm">lives</a></span></li>
  </ul>
  <p>Наконец, есть две переменные, которые можно использовать для функций и методов сценария:</p>
  <ul class="colour">
    <li><a data-xref="{title}" href="Builtin_Global_Variables/argument.htm">argument</a></li>
    <li><a data-xref="{title}" href="Builtin_Global_Variables/argument_count.htm">argument_count</a></li>
  </ul>
  <p>Следующая форма также может быть использована для объявления глобальных переменных, но она является <i><b>включено только для обратной совместимости</b></i>и не рекомендуется использовать эту форму в новых проектах, так как будущие версии <span class="notranslate">GameMaker</span> могут ее не поддерживать.</p>
  <p>Вторая форма создания глобальных переменных - это объявление их как таковых с помощью объявления <span class="inline">globalvar</span>, точно так же, как вы объявляете локальную переменную с помощью объявления <span class="inline">var</span>.</p>
  <p class="note"><b>ВАЖНО!</b> Объявление <span class="inline">globalvar</span> <b>устарело</b> и поддерживается только для старых целей. Вы <b>всегда</b> должны использовать идентификатор <span class="inline">global.</span> для обозначения глобальных переменных.</p>
  <p>Это (устаревшее) объявление будет использоваться следующим образом:</p>
  <p class="code">globalvar food;<br />
    food = 5;</p>
  <p>Объявленная таким образом переменная &quot;food&quot; теперь считается глобальной и не требует префикса <span class="inline">global.</span> - это также означает, что в коде гораздо сложнее идентифицировать глобальные переменные, а также гораздо проще получить дублирование переменных, поскольку вы используете одно и то же имя переменной в различных объектах или установленных расширениях. После объявления глобальной переменной доступ к ней осуществляется следующим образом:</p>
  <p class="code">food += 2;</p>
  <p>или:</p>
  <p class="code">draw_text(32, 32, &quot;food = &quot; + string(food));</p>
  <p>Как видите, не имея ничего, что могло бы показать, что переменная является глобальной в области видимости, вы потенциально создаете себе множество тонких проблем, которые могут возникнуть в вашей игре, поэтому такого объявления следует избегать.</p>
  <p>Существует несколько функций, призванных помочь вам при работе с глобальными переменными, которые вы можете найти на следующей странице:</p>
  <ul class="colour">
    <li><a href="../../GML_Reference/Variable_Functions/Variable_Functions.htm">Переменные функции</a></li>
  </ul>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Назад: <a href="../Variables_And_Variable_Scope.htm">Переменные и область применения переменных</a></div>
        <div style="float:right">Следующее: <a href="Constants.htm">Константы</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Все права защищены</span></h5>
  </div>
  <!-- KEYWORDS
global
globalvar
global variables
-->
  <!-- TAGS
global_variables
-->
</body>
</html>