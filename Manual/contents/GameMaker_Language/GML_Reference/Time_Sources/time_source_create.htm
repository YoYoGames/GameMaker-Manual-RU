<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <title>время_источника_создать</title>
  <meta name="topic-status" content="Draft" />
  <link rel="stylesheet" type="text/css" href="../../../assets/css/default.css" />
  <script src="../../../assets/scripts/main_script.js"></script>
  <meta name="template" content="../../../assets/masterpages/Manual_Keyword_Page.htt" />
  <meta name="rh-authors" content="Gurpreet S. Matharoo" />
  <meta name="topic-comment" content="Reference page for time_source_create" />
  <meta name="rh-index-keywords" content="time_source_create" />
  <meta name="search-keywords" content="time_source_create" />
</head>
<body>
  <h1>время_источника_создать</h1>
  <p>Эта функция создает новый <span data-keyref="Type_Resource_TimeSource">источник времени</span>. Для получения более подробной информации читайте раздел <a data-xref="{title}" href="Time_Sources.htm">Источники времени</a>.</p>
  <p>Создание нового <span data-keyref="Type_Resource_TimeSource">источника времени</span> не запускает его автоматически; вы должны вызвать <a href="time_source_start.htm"><span class="inline">time_source_start()</span></a> чтобы активировать его.</p>
  <p>Новый <span data-keyref="Type_Resource_TimeSource">источник времени</span> запускается только один раз, если не указан аргумент <span class="inline2">повторений</span> (читайте ниже).</p>
  <p>Вы должны уничтожить <span data-keyref="Type_Resource_TimeSource">Источник времени</span>, используя <a href="time_source_destroy.htm"><span class="inline">time_source_destroy()</span></a> когда он вам больше не нужен.</p>
  <h2>Аргументы</h2>
  <p>Ниже приведена разбивка аргументов функции:</p>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down1" href="#">Источник родительского времени</a></h3>
  <div class="droptext" data-targetname="drop-down1">
    <p class="dropspot">Это родительский <span data-keyref="Type_Resource_TimeSource">источник времени</span>, который управляет новым <span data-keyref="Type_Resource_TimeSource">источником времени</span>. Это может быть <span class="inline2">time_source_global</span>, <span class="inline2">time_source_game</span> или пользовательский <span data-keyref="Type_Resource_TimeSource">источник времени</span>, который уже существует.<br />
      <br />
      См: <a data-xref="{title}" href="Built_In_Time_Sources.htm">Встроенные источники времени</a>
    </p>
  </div>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down2" href="#">Период</a></h3>
  <div class="droptext" data-targetname="drop-down2">
    <p class="dropspot">Это период времени, который может быть выражен в секундах или кадрах, в зависимости от единицы измерения, указанной в следующем аргументе.</p>
    <p class="dropspot">При использовании кадров в качестве единицы измерения период должен быть целым числом. Нецелые значения округляются вниз (floored), за исключением значений меньше 1, которые округляются до 1.</p>
  </div>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down3" href="#">Единица</a></h3>
  <div class="droptext" data-targetname="drop-down3">
    <p class="dropspot">Это единица, в которой выражается период, и может быть <span class="inline2">time_source_units_seconds</span> или <span class="inline2">time_source_units_frames</span>.</p>
    <p class="dropspot">См: <a data-xref="{title}" href="Time_Source_Units.htm">Единицы источника времени</a></p>
    <p class="dropspot">Вы можете использовать значение частоты ударов в минуту с помощью <span class="inline"><a href="time_bpm_to_seconds.htm">time_bpm_to_seconds()</a></span>.</p>
  </div>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down4" href="#">Обратный вызов и аргументы</a></h3>
  <div class="droptext" data-targetname="drop-down4">
    <p class="dropspot">Вы должны указать &quot;обратный вызов&quot; <a href="../../GML_Overview/Method_Variables.htm"><span class="notranslate">method</span></a> который будет вызываться по истечении срока действия <span data-keyref="Type_Resource_TimeSource">источника времени</span>.</p>
    <p class="dropspot">Вы можете дополнительно указать массив, содержащий аргументы, которые должны быть переданы в метод при его вызове.</p>
    <p class="dropspot">Сам массив не будет передан в метод, скорее каждый элемент массива будет передан как отдельный аргумент.</p>
    <p class="dropspot">Например, если ваша функция ожидает аргументы <span class="inline2">(x, y, object)</span>, то ваш массив <span class="inline2">args</span> может выглядеть следующим образом: <span class="inline2">[30, 600, obj_player]</span>.</p>
  </div>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down5" href="#">Повторы</a></h3>
  <div class="droptext" data-targetname="drop-down5">
    <p class="dropspot">Вы можете опционально указать, сколько раз должен повторяться <span data-keyref="Type_Resource_TimeSource">источник времени</span>. Значение <span class="inline2">1</span> означает, что он запускается только один раз, что является значением по умолчанию.</p>
    <p class="dropspot">Вы можете указать общее количество повторений, или <span class="inline2">-1</span>, чтобы повторять бесконечно.</p>
    <p class="dropspot">Например, если вы установите значение 3, а период <span data-keyref="Type_Resource_TimeSource">источника времени</span> - &quot;4 секунды&quot;, то <span data-keyref="Type_Resource_TimeSource">источник времени</span> будет активен в течение 12 секунд и будет вызывать метод обратного вызова каждые 4 секунды.</p>
  </div>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down6" href="#">Тип истечения срока действия</a></h3>
  <div class="droptext" data-targetname="drop-down6">
    <p class="dropspot">Это может быть <span class="inline2">время_источника_истечения_ближайшее</span> или <span class="inline2">время_источника_истечения_после</span>.</p>
    <p class="dropspot">См: <a data-xref="{title}" href="Time_Source_Expiry_Types.htm">Типы истечения срока действия источника времени</a></p>
  </div>
  <p> </p>
  <h4>Синтаксис:</h4>
  <p class="code">time_source_create(parent, period, units, callback, [args, repetitions, expiry_type]);</p>
  <table>
    <colgroup>
      <col />
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th>Аргумент</th>
        <th>Тип</th>
        <th>Описание</th>
      </tr>
      <tr>
        <td><span class="notranslate">parent</span></td>
        <td><span data-keyref="Type_ID_TimeSource"><a href="../../../../GameMaker_Language/GML_Reference/Time_Sources/time_source_create.htm" target="_blank">Идентификатор источника времени</a></span></td>
        <td><span class="notranslate">The parent <span data-keyref="Type_Resource_TimeSource">Time Source</span> который управляет новым <span data-keyref="Type_Resource_TimeSource">источником времени</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">period</span></td>
        <td><span data-keyref="Type_Real"><a href="../../../../GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">Реально</a></span></td>
        <td><span class="notranslate">The period that the <span data-keyref="Type_Resource_TimeSource">Time Source</span> работает для, в заданных единицах</td>
      </tr>
      <tr>
        <td><span class="notranslate">units</span></td>
        <td><span data-keyref="Type_Constant_TimeSource_Unit"><a href="../../../../GameMaker_Language/GML_Reference/Time_Sources/Time_Source_Units.htm" target="_blank">Источник времени Единица измерения Постоянная</a></span></td>
        <td><span class="notranslate">The units that the given period is in</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">callback</span></td>
        <td><span data-keyref="Type_Method"><a href="../../../../GameMaker_Language/GML_Overview/Method_Variables.htm" target="_blank">Метод</a></span> или <span data-keyref="Type_Function_Script"><a href="../../../../GameMaker_Language/GML_Overview/Script_Functions.htm" target="_blank">Функция сценария</a></span></td>
        <td><span class="notranslate">The method or script function to call when the <span data-keyref="Type_Resource_TimeSource">Time Source</span> истекает</td>
      </tr>
      <tr>
        <td><span class="notranslate">args</span></td>
        <td><span data-keyref="Type_Array"><a href="../../../../GameMaker_Language/GML_Overview/Arrays.htm" target="_blank">Массив</a></span></td>
        <td><span class="notranslate"><span class="optional">OPTIONAL</span> Массив, содержащий аргументы для передачи в метод</td>
      </tr>
      <tr>
        <td><span class="notranslate">repetitions</span></td>
        <td><span data-keyref="Type_Real"><a href="../../../../GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">Реально</a></span></td>
        <td><span class="notranslate"><span class="optional">OPTIONAL</span> Количество повторений <span data-keyref="Type_Resource_TimeSource">источника времени</span> или -1 для бесконечного повторения.</td>
      </tr>
      <tr>
        <td><span class="notranslate">expiry_type</span></td>
        <td><span data-keyref="Type_Constant_TimeSource_Expiry"><a href="../../../../GameMaker_Language/GML_Reference/Time_Sources/Time_Source_Expiry_Types.htm" target="_blank">Срок действия источника времени Постоянная</a></span></td>
        <td><span class="notranslate"><span class="optional">OPTIONAL</span> Истекает ли срок действия <span data-keyref="Type_Resource_TimeSource">источника времени</span> на ближайшем к его истечению кадре или на следующем кадре</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>Возвращается:</h4>
  <p class="code"><span data-keyref="Type_ID_TimeSource"><a href="../../../../GameMaker_Language/GML_Reference/Time_Sources/time_source_create.htm" target="_blank">Time Source ID</a></span></p>
  <p> </p>
  <h4>Пример 1:</h4>
  <p class="code">var _my_method = function()<br />
    {<br />
        instance_destroy();<br />
    }<br />
    <br />
    var _time_source = time_source_create(time_source_game, 300, time_source_units_frames, _my_method);<br />
    <br />
    time_source_start(time_source);
  </p>
  <p>В этом примере мы хотим, чтобы экземпляр уничтожил себя через 300 кадров.</p>
  <p>Сначала код создает метод, который просто вызывает <a href="../Asset_Management/Instances/instance_destroy.htm"><span class="inline">instance_destroy()</span></a>.</p>
  <p>Затем создается <span data-keyref="Type_Resource_TimeSource">источник времени</span>, наследующий <span data-keyref="Type_Resource_TimeSource">источник времени</span> игры. Он устанавливает его период в <strong>300 кадров</strong>.</p>
  <p>Наконец, запускается <span data-keyref="Type_Resource_TimeSource">источник времени</span>.</p>
  <p> </p>
  <h4>Пример 2:</h4>
  <p class="code">var _my_method = function()<br />
    {<br />
        show_debug_message(&quot;A second has passed!&quot;);<br />
    }<br />
    <br />
    global.time_per_second = time_source_create(time_source_game, 1, time_source_units_seconds, _my_method, [], -1, time_source_expire_after);<br />
    <br />
    time_source_start(global.time_per_second);
  </p>
  <p>В этом примере мы создаем глобальный <span data-keyref="Type_Resource_TimeSource">источник времени</span>, который истекает раз в секунду. Этот код должен быть помещен в корень файла <a href="../../../The_Asset_Editors/Scripts.htm"><span class="notranslate">script</span></a>.</p>
  <p>Сначала создается метод, который печатает сообщение в выходной журнал: <strong>&quot;Прошла секунда!&quot;</strong>.</p>
  <p>Затем он создает новый <span data-keyref="Type_Resource_TimeSource">источник времени</span>, наследуя от <span data-keyref="Type_Resource_TimeSource">источника времени</span> игры. Он устанавливает его период в <strong>1 секунду</strong>.</p>
  <p>Метод передается в <span data-keyref="Type_Resource_TimeSource">источник времени</span>, чтобы его можно было вызывать каждый раз, когда истекает срок его действия. В качестве аргументов передается пустой массив.</p>
  <p>Счетчик повторений установлен на -1, поэтому <span data-keyref="Type_Resource_TimeSource">источник времени</span> никогда не останавливается и продолжает повторяться вечно. Тип истечения установлен так, чтобы обратный вызов запускался на первом кадре после истечения срока действия.</p>
  <p>Наконец, запускается <span data-keyref="Type_Resource_TimeSource">источник времени</span>.</p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div>Назад: <a data-xref="{title}" href="Time_Sources.htm">Источники времени</a> </div>
        <div>Далее: <a data-xref="{title}" href="time_source_destroy.htm">time_source_destroy</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Все права защищены</span></h5>
  </div>
  <!-- KEYWORDS
time_source_create
-->
  <!-- TAGS
time_source_create
-->
</body>
</html>