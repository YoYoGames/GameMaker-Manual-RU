<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Если форма столкновения</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css" />
  <script src="../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page that explains the If Collision Shape action" />
  <meta name="rh-index-keywords" content="GML Visual Action - If Collision Shape" />
  <meta name="search-keywords" content="If Collision Shape" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><img> Если форма столкновения</h1>
  <p>Это действие используется для проверки наличия столкновения с экземпляром заданного объекта в области заданной формы или вдоль линии. Вы указываете форму (прямоугольник, эллипс или линия), объект для проверки, а затем задаете координаты для
    верхнего левого и нижнего правого углов используемой фигуры, или, в случае линии, начального и конечного положения. Это могут быть абсолютные позиции в пределах игровой комнаты или позиции относительно экземпляра, выполняющего действие. Вы можете увидеть, как
    это работает на изображении ниже:</p>
  <p><img>Как вы можете видеть, результаты будут зависеть от маски столкновений проверяемого экземпляра.
    то есть экземпляр искомого объекта <i>должен</i> иметь <span class="notranslate">sprite</span>, назначенный на <span class="inline">sprite_index</span>, или <span class="notranslate">sprite</span>, назначенный на <span class="inline">mask_index</span>. Если это не так, то он не будет обнаружен этими функциями,
    независимо от того, рисует ли он <span class="notranslate">sprite</span> или нет. Стоит отметить, что любой экземпляр, который полностью попадает в границы, установленные для формы эллипса или прямоугольника, также вернет столкновение. Действие будет оценено в <span class="inline">true</span>, если
    столкновение обнаружено, или <span class="inline">false</span> в противном случае, хотя вы также можете установить флаг <b>Not</b>, чтобы проверить, <i>нет</i> ли столкновения с данной областью фигуры, и тогда действие будет оцениваться как <span class="inline">true</span>, если столкновений <i>не</i> обнаружено.
    в противном случае оно будет оцениваться как <span class="inline">false</span>. Вы также можете установить опцию <b>Exclude Self</b>, чтобы исключить вызывающий экземпляр из проверки столкновений.</p>
  <p>Далее вы можете установить/отметить опцию <b>Возвращать список</b>. Установка флажка означает, что действие создаст и заполнит <a href="../Data_Structures/Data_Structure_Actions.htm">список</a><span> </span>структурой данных со <i>всеми экземплярами</i>в столкновении
    с фигурой и установит переменную <b>Target</b> в идентификатор списка DS. Если флажок не установлен, то переменная <b>Target</b> будет установлена в значение меньше 0 только в том случае, если столкновение не обнаружено, или в уникальное значение ID <i>одного</i> из столкнувшихся экземпляров.
    (обратите внимание, что если в столкновении участвуют несколько экземпляров, то у вас нет возможности узнать, какой ID экземпляра будет возвращен, если не используется список).</p>
  <p>Если вы выбрали возврат списка - и переменная Target <i>не</i> установлена в <b>Temp</b> - то вы также можете выбрать опцию <b>Free Target</b>. Если установлено значение <span class="inline">true</span>, то список, содержащийся в переменной target, будет уничтожен и
    новый список будет создан (и возвращен в переменную target) каждый раз, когда вы вызываете действие. Таким образом, вы можете повторно использовать одну и ту же переменную, не беспокоясь об утечке памяти, поскольку, если вы <i>не</i> отметите опцию <b>Free Target</b>, вы становитесь ответственным за то, что
    за уничтожение списка перед повторным использованием переменной в действии. Обратите внимание, что <i>независимо от</i> того, отмечена эта опция или нет, если вы установили действие на <b>Return List</b>, то переменная target <i>всегда будет содержать идентификатор списка</i>,
    и как таковая, она должна быть освобождена при уничтожении экземпляра или завершении комнаты (для этого можно использовать событие <a href="../../../The_Asset_Editors/Object_Properties/Object_Events.htm"><b>Очистка</b></a> событие, например, вместе с действием <a href="../Data_Structures/Free_Data_Structure.htm">Free Data Structure</a><span> </span>).
    Стоит отметить, что вы можете установить опцию <b>Free Target</b> на использование предопределенной переменной или выражения и таким образом контролировать, когда структура данных списка будет освобождена, установив переменную в другом месте (или используя различные результаты для выражения)
    до тех пор, пока оно оценивается как <span class="inline">true</span>/<span class="inline">false</span>.</p>
  <p>Наконец, вы указываете переменную <b>Target</b>, которая будет содержать возвращаемое значение или ID списка. Если вы отметите переменную Target для хранения возвращаемого значения как <b>Temp</b> (локальную) переменную, то действие создаст эту переменную для хранения возвращаемого значения только до конца события.
    В этом случае опция Free Target ничего не делает, и вы будете ответственны за уничтожение списка DS, если эта опция была отмечена. Если переменная цели не задана, а опция <b>Return List</b> отмечена, список не будет создан.</p>
  <p class="note"><b>ВАЖНО!</b> Столкновения будут регистрироваться только для тех экземпляров, которые имеют действительную маску столкновения, т.е. у них есть <span class="notranslate">sprite</span>, назначенный на <span class="inline">sprite_index</span>, или <span class="notranslate">sprite</span>, назначенный на <span class="inline">mask_index</span>. Если у экземпляров объекта, который проверяется в этом действии, нет маски столкновения, то столкновение будет обнаружено независимо от того, что рисует экземпляр в данный момент.
    не имеют маски столкновения, то столкновение не будет обнаружено, независимо от того, что в данный момент рисует экземпляр.</p>
  <p>Обратите внимание, что для добавления действий в блок &quot;<span class="inline">if</span>&quot;, их следует опустить <i>сбоку от</i> действия, как показано на изображении ниже:</p>
  <p><img alt="If Collision Shape Icon" class="icon" height="32" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/i_Collision_Shape.png" width="32" /></p>
  <p> </p>
  <h4>Синтаксис действия:</h4>
  <p><img alt="Example of different collision shapes" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/collision_shape_example.png" /></p>
  <h4>Аргументы:</h4>
  <table>
    <tbody>
      <tr>
        <th>Аргумент</th>
        <th>Описание</th>
      </tr>
      <tr>
        <td><span class="notranslate">Shape</span></td>
        <td>Форма для использования</td>
      </tr>
      <tr>
        <td><span class="notranslate">Object</span></td>
        <td>Объект для проверки на наличие экземпляров</td>
      </tr>
      <tr>
        <td><span class="notranslate">x1</span></td>
        <td>Позиция x, с которой нужно начинать</td>
      </tr>
      <tr>
        <td><span class="notranslate">y1</span></td>
        <td>Позиция y, с которой нужно начинать</td>
      </tr>
      <tr>
        <td><span class="notranslate">x2</span></td>
        <td>Позиция x, на которой нужно закончить</td>
      </tr>
      <tr>
        <td><span class="notranslate">y2</span></td>
        <td>Позиция y, на которой нужно закончить</td>
      </tr>
      <tr>
        <td><span class="notranslate">Free Target</span></td>
        <td>Может быть задана переменная или выражение, или установлено значение <span class="inline">true</span>/<span class="inline">false</span> для управления освобождением памяти списка при повторном использовании переменной списка.</td>
      </tr>
      <tr>
        <td><span class="notranslate">Target</span></td>
        <td>Переменная, на которую будет нацелено возвращаемое значение действия</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>Пример:</h4>
  <p><img>Приведенный выше код блока действий проверяет столкновение с любыми экземплярами объекта &quot;
   <span class="inline">obj_Enemy</span>&quot; в радиусе 100px вокруг позиции вызывающего экземпляра. Действие генерирует список всех экземпляров, с которыми обнаружено столкновение, и сохраняет идентификатор списка в переменной Target. Если действие оценивается как
    <span class="inline">true</span> то список просматривается по циклу и у каждого экземпляра с его ID, сохраненным в списке, переменная &quot;<span class="inline">hp</span>&quot; уменьшается на 1. Затем список DS освобождается.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Назад: <a href="Collision_Actions.htm">Действия при столкновении</a></div>
        <div style="float:right">Следующий: <a href="If_Collision_Point.htm">Если точка столкновения</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Все права защищены</span></h5>
  </div>
  <!-- KEYWORDS
Action - If Collision Shape
-->
  <!-- TAGS
action_if_collision_shape
-->
</body>
</html>