<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <title>Небитовые спрайты</title>
  <meta name="topic-status" content="Draft" />
  <link rel="stylesheet" type="text/css" href="../../assets/css/default.css" />
  <script src="../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Section explaining non-bitmap sprites in GameMaker" />
  <meta name="search-keywords" content="SWF,Spine,skeleton animation,vector sprites" />
  <meta name="rh-index-keywords" content="Texture Goups - Non-Bitmap Sprites,SWF,Spine" />
</head>
<body>
  <h1>Небитовые спрайты</h1>
  <p>В<span data-keyref="GameMaker Name">GameMaker</span> есть поддержка небитовых изображений <span class="notranslate">sprites</span> в виде <a class="glossterm" data-glossterm="вектор" href="#">векторных</a> файлов <span class="inline">SWF </span>или файлов <strong>Spine Skeletal Animation</strong>. Оба эти формата имеют свои плюсы и минусы, и в двух следующих разделах рассказывается о том, как импортировать их в <a href="../../The_Asset_Editors/Sprites.htm">редактор спрайтов</a>, а также немного информации о том, как они рисуются.</p>
  <h2>Скелетная анимация <span class="notranslate">Sprites</span> (<span class="notranslate">Spine</span>)</h2>
  <p>Сайт <span class="notranslate">sprite</span>, созданный с использованием скелетной анимации, - это файл, в котором создан базовый &quot;скелет&quot; и анимирован с помощью ключевых кадров для перемещения составных частей скелета во времени. Затем на этот скелет накладывается текстура из <a class="glossterm" data-glossterm="атлас текстур" href="#">атласа текстур</a>, и полученная анимация экспортируется в один из многих типов файлов. <span data-keyref="GameMaker Name">GameMaker</span> позволяет импортировать этот тип файла <span class="notranslate">sprite</span>, если он был экспортирован как файл формата <span class="inline">*.json</span> и имеет корректно связанный файл атласа текстур (<span class="inline">*.atlas</span>) и файл изображения (как <span class="inline">*.png</span>) в том <em>же каталоге</em>.</p>
  <p><img>В настоящее время <span data-keyref="GameMaker Name">GameMaker</span> может <strong>импортировать векторные изображения только из файлов формата JSON, созданных программой <a href="http://esotericsoftware.com/">Spine</a></strong>, однако способ их импорта в программу практически идентичен способу добавления обычного растрового изображения. Чтобы добавить скелетную анимацию, нужно создать новый файл <span class="notranslate">sprite</span>, который вызовет стандартный диалог <strong>Load Sprite</strong>, только здесь нужно убедиться, что вы выбрали <span class="inline">*.json</span> из фильтра файлов внизу:</p>
  <p><img alt="Spine UI" class="center" src="../../assets/Images/Settings/Spine_Example.png" /></p>
  <p>Нажатие кнопки &quot;Загрузить&quot; добавит скелетную анимацию в <a href="../../Introduction/The_Asset_Browser.htm">Браузер активов</a> как <span class="notranslate">sprite</span>, при этом по мере обработки файла будет отображаться индикатор выполнения. Обратите внимание, что в зависимости от сложности файла это может занять минуту или две. По окончании обработки вы вернетесь в диалог свойств <span class="notranslate">sprite</span>, который теперь будет выглядеть следующим образом:</p>
  <p><img>После импорта анимации вы можете задать свойства столкновений, но учтите, что здесь вы ограничены использованием только точных столкновений или столкновений с ограничивающей рамкой, и что данные о столкновениях для скелетной анимации явно берутся из предоставленных данных. <span data-keyref="GameMaker Name">GameMaker</span> не генерирует маски столкновений, если данные отсутствуют в импортируемом файле, то есть вы просто не получите работающих столкновений, если маски не установлены правильно в программе, используемой для создания импортируемого изображения.</p>
  <p class="note"><span class="note">ПРИМЕЧАНИЕ</span> Из-за сложности скелетной анимации, изображение предварительного просмотра, показанное в редакторе <span class="notranslate">sprite</span>, не предназначено для точного представления вашей анимации, а скорее дает вам простое изображение, которое представляет анимацию для визуализации в редакторе помещений.</p>
  <p>В отличие от растровой <span class="notranslate">sprites</span>, импортированная скелетная анимация <span class="notranslate">sprite</span> <strong>не может быть изменена в редакторе</strong> никаким образом, но есть ряд функций, доступных внутри <span class="notranslate">GameMaker Language</span> (<span class="notranslate">GML</span>), которые могут быть использованы для изменения скинов, установки свойств и управления другими аспектами анимации. Вы также не можете установить какие-либо параметры текстуры для <span class="notranslate">sprite</span>, так как <span class="notranslate">GameMaker</span> будет использовать поставляемый атлас текстур, созданный программой, которая сгенерировала <span class="notranslate">sprite</span>.</p>
  <p>Существует ряд моментов, о которых следует знать при импорте скелетной анимации <span class="notranslate">sprites</span>, наиболее важным из которых является то, что некоторые функции рисования <span class="notranslate">sprite</span> и управления <span class="notranslate">sprite</span> не поддерживаются по техническим причинам, особенно те функции рисования, которые рисуют только часть <span class="notranslate">sprite</span>, или &quot;перекашивают&quot; позицию каким-либо образом (см. отдельные <a href="../../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/Sprites_And_Tiles.htm"><span class="inline">draw_sprite_*()</span></a> функции для получения точной информации о них). Однако основные функции рисования <span class="notranslate">sprite</span> поддерживаются полностью, как и встроенные переменные <span class="notranslate">sprite</span>. Помимо этих функций и переменных, вы также можете задавать и изменять свойства анимации с помощью специальных функций <span class="inline">skeleton_*</span>, которые перечислены и объяснены в справочном разделе " <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Skeletal_Animation/Skeletal_Animation.htm">Скелетная анимация</a>".</p>
  <h2>Вектор <span class="notranslate">Sprites</span> (SWF)</h2>
  <p>Как правило, все <span class="notranslate">sprites</span> в <span class="notranslate">GameMaker</span> используют растровые изображения, которые, несмотря на гибкость в плане содержания, накладывают ограничения на размер и количество кадров, возможных в <span class="notranslate">sprite</span>, прежде чем использование памяти может стать непомерно большим. Векторный <span class="notranslate">sprites</span> обходит эти ограничения, храня и рисуя свое содержимое по-другому: вместо сетки пикселей, которая может стать блочной или нечеткой при масштабировании, они рисуются в виде треугольников с использованием векторной математики, которые могут быть увеличены (или уменьшены) без потери четкости, как показано на изображении ниже:</p>
  <p><img>Чтобы помочь вам представить, как это делается, ниже приведено изображение того же вектора Fireman <span class="notranslate">sprite</span>, только теперь мы видим полигоны, которые используются для создания изображения в <span data-keyref="GameMaker Name">GameMaker</span>:</p>
  <p><img>Однако в программировании игр ничто не дается даром, и компромисс с векторными <span class="notranslate">sprites</span> заключается в том, что они требуют больше затрат процессора на рисование, чем растровые <span class="notranslate">sprites</span>, и эта разница в скорости увеличивается по мере роста сложности импортируемой анимации. Кроме того, в отличие от растровых <span class="notranslate">sprites</span>, их использование памяти зависит от их визуальной сложности. Несмотря на это, они позволяют добавлять большую анимированную графику таким образом, который был бы невозможен при использовании традиционных растровых изображений <span class="notranslate">sprites</span>.</p>
  <p>С другой стороны уравнения производительности, поскольку векторный <span class="notranslate">sprites</span> рисует только абсолютно необходимые пиксели (в отличие от растрового <span class="notranslate">sprites</span>, который также &quot;рисует&quot; пустое пространство вокруг изображения), он может быть дешевле с точки зрения GPU. Кроме того, в целом векторные <span class="notranslate">sprites</span> намного меньше своих растровых аналогов - для приведенного выше примера с пожарным размеры различных типов <span class="notranslate">sprite</span> следующие:</p>
  <p class="code">Bitmap at 70x68 = 4x70x68 bytes x 12 frames = 223k<br />
    Vector = 54k</p>
  <p>Если вы увеличите разрешение спрайта в четыре раза:</p>
  <p class="code">Bitmap at 280x272 = 4x280x272 bytes x 12 frames = 3570k<br />
    Vector = 54k</p>
  <p>Итак, как вы можете видеть, много памяти можно потенциально сэкономить, используя вектор <span class="notranslate">sprites</span>, и у нас еще есть большой потенциал для экономии места в будущем.</p>
  <p>В настоящее время <span data-keyref="GameMaker Name">GameMaker</span> имеет <em>ограниченную </em>поддержку векторных <span class="notranslate">sprites</span>. и может импортировать векторные изображения только из файлов формата <span class="inline">SWF</span>. Способ их импорта в программу практически идентичен способу добавления обычного растрового изображения. Чтобы добавить векторное изображение <span class="notranslate">sprite</span>, создайте новый файл <span class="notranslate">sprite</span>, который вызовет стандартный диалог Load <span class="notranslate">Sprite</span>, но убедитесь, что вы выбрали <span class="inline">*.swf</span> из фильтра файлов внизу.</p>
  <p><img>Нажатие кнопки &quot;Загрузить&quot; добавит векторное изображение или анимацию в <a href="../../Introduction/The_Asset_Browser.htm">Браузер активов</a>, при этом по мере обработки файла будет отображаться индикатор выполнения. Обратите внимание, что в зависимости от сложности файла это может занять некоторое время (до минуты для более сложных анимаций). По окончании обработки вы вернетесь к диалогу свойств <span class="notranslate">sprite</span>, который теперь будет выглядеть следующим образом:</p>
  <p><img>Редактор <span class="notranslate">sprite</span> практически не изменился, но теперь кнопка <strong>Edit Image</strong> стала серой и не может быть нажата, поскольку в этом типе <span class="notranslate">sprite</span> нет растровых изображений для редактирования. Во-вторых, все опции текстур тоже стали серыми. SWF <span class="notranslate">sprites</span> основан на математике и, как таковой, обычно не имеет текстур, поэтому ни одна из доступных опций не применима для этого вида <span class="notranslate">sprite</span>.</p>
  <p class="note"><span class="note">ПРИМЕЧАНИЕ</span> То, как изображение выглядит в выбранном вами редакторе предварительного просмотра, не будет совпадать ни с тем, как оно выглядит в вашей игре, ни с тем, как оно выглядит в окне предварительного просмотра редактора <span class="notranslate">sprite</span>. Векторное изображение будет импортировано в том размере, в котором оно было создано, а это не обязательно тот размер, который отображается в окне предварительного просмотра (браузеры, например, обычно масштабируют изображение для подгонки).</p>
  <p>Одним из дополнений к редактору <span class="notranslate">Sprite</span> является то, что вы можете установить <em>качество </em>векторного <span class="notranslate">sprite</span> при рисовании с помощью ползунка <strong>SWF Precision</strong> в верхней части. Это просто уменьшит или увеличит количество треугольников, используемых для генерации <span class="notranslate">sprite</span> - значение около 50% обычно достаточно для большинства игр - однако вам следует поэкспериментировать с этим значением, если вы используете экстремальное масштабирование или испытываете проблемы с производительностью.</p>
  <p>Существует ряд моментов, о которых следует знать при импорте векторного <span class="notranslate">sprites</span>, наиболее важным из которых является то, что некоторые функции рисования <span class="notranslate">sprite</span> и управления <span class="notranslate">sprite</span> не поддерживаются по техническим причинам, особенно те функции рисования, которые рисуют только часть <span class="notranslate">sprite</span>, или каким-либо образом &quot;перекашивают&quot; положение (см. отдельные функции). <a href="../../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/Sprites_And_Tiles.htm"><span class="inline">draw_sprite_*()</span></a> функции для получения точной информации о них). Однако основные функции рисования <span class="notranslate">sprite</span> полностью поддерживаются, как и встроенные переменные <span class="notranslate">sprite</span>. Вы также можете установить различные значения <a class="glossterm" data-glossterm="сглаживание" href="#">сглаживания</a> (AA) для рисуемого SWF <span class="notranslate">sprites</span> с помощью функций <span class="inline"><a href="../../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/draw_enable_swf_aa.htm">draw_enable_swf_aa()</a></span>, <span class="inline"><a href="../../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/draw_get_swf_aa_level.htm">draw_get_swf_aa_level()</a></span> или <span class="inline"><a href="../../GameMaker_Language/GML_Reference/Drawing/Sprites_And_Tiles/draw_set_swf_aa_level.htm">draw_set_swf_aa_level()</a></span>.</p>
  <p>Вы также должны знать следующее:</p>
  <ul class="colour">
    <li>При импорте файла <span class="inline">*.SWF</span> функция Actionscript <em>не </em>поддерживается, поэтому если ваш SWF полагается на нее для корректной работы, то, скорее всего, он не будет работать правильно. Аналогично, любые встроенные видеоклипы, имеющие свою собственную временную шкалу, будут иметь только первый кадр, показанный на протяжении всей анимации - вся анимация должна быть на основной временной шкале.</li>
    <li>Если ваш векторный файл имеет особенно мелкие детали, вы можете иногда обнаружить, что в полученном изображении <span class="notranslate">sprites</span> появляются дыры или странные треугольники. Это происходит потому, что при малых масштабах геометрия может иногда сбиваться вместе, создавая фигуры, которые просто плохо триангулируются. В этом случае у вас есть два варианта - вы можете увеличить масштаб содержимого векторного файла, что даст импортеру больше пространства для игры, или вы можете попытаться уменьшить уровень детализации объекта, который ломается.</li>
    <li><span data-keyref="GameMaker Name">GameMaker</span> использует размер сцены SWF в качестве границ результирующего файла <span class="notranslate">sprite</span>. Однако, если на сцене есть что-либо за пределами этих границ, оно все равно будет нарисовано. Это означает, что вы должны либо стараться не размещать ничего за границами сцены, если не хотите, чтобы это было показано, либо использовать слой-маску, чтобы ограничить рисование этой областью.</li>
    <li>Размер сцены также влияет на размер генерируемых масок столкновений, поэтому если у вас большой размер сцены и много кадров в анимации, вы можете съесть много памяти. Поэтому используйте точные маски столкновений только в том случае, если это действительно необходимо.</li>
    <li>Поскольку SWF-файл создается из нескольких слоев, некоторые из которых могут перекрываться, альфа работает не совсем так, как в растровых картах <span class="notranslate">sprites</span> - перекрывающиеся области будут выглядеть не такими прозрачными, как другие части <span class="notranslate">sprite</span>, поскольку пиксели в них перерисовываются несколько раз.</li>
    <li> <em>Поддерживаются </em>растровые заливки, хотя если вы используете плиточные растровые заливки как часть вашего SWF-файла, вам нужно убедиться, что размер растрового изображения равен двум целым, в противном случае оно не будет плиточным. Рендеринг текста также поддерживается, но для того, чтобы он отображался в результирующем файле <span class="notranslate">sprite</span>, необходимо встроить шрифт в SWF-файл. Кроме того, в настоящее время поддерживается только однострочный текст с левым выравниванием.</li>
  </ul>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Назад: <a href="../Texture_Groups.htm">Группы текстур</a></div>
        <div style="float:right">Следующий: <a href="Texture_Pages.htm">Страницы текстур</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Все права защищены</span></h5>
  </div>
</body>
</html>